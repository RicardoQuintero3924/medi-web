<!DOCTYPE HTML>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>MEDI-WEB PRODUCTOS</title>


    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../css/bootstrap.min.css" />
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/carousel-fadein-fadeout.css">
    <link href="../../css/owl.carousel.min.css" rel="stylesheet">
    <link href="../../css/owl.theme.default.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css" />
    <link rel="stylesheet" href="../../css/estilos.css" />
    <link rel="stylesheet" href="../../css/responsive.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,600;0,700;0,800;1,600;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,800" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
</head>

<body>

    <!-- Begin wrapper -->
    <div class="wrapper">
        <!-- Begin Top Navbar -->
        <header id="top" class="top_navbar">
            <div class="container">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="navbar-brand" href="index.html"><img src="../../images/logo.png" width="50%" height="70%" alt="" /></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon">
                            <i class="fa fa-bars"></i>
                        </span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <button id="carrito" class="nav-link"><label id="numCarrito"></label><i class="fas fa-cart-plus"></i></button>
                            </li>
                            <li class="nav-item active">
                                <a class="nav-link" href="../../index.html">Inicio <span class="sr-only">(current)</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="../../contact.html">Contacto</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="../../about-us.html">Nosotros</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="../../faq.html">FAQ</a>
                            </li>
                        </ul>
                        <ul class="nav navbar-nav navbar-right">
                            <li><a class=" btn btn-primary my-2 my-sm-0 my-account-btn" href="login.html">Iniciar Sesion</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </header>
        <!-- End Top Navbar -->
        <!-- Begin Banner -->
        <div class="about-banner-section">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="about-banner-title">
                            <h2>PRODUCTOS</h2>
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item active"><a href="index.html">INICIO</a></li>
                                    <li class="breadcrumb-item" aria-current="page">PRODUCTOS</li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <nav class="menu_categoria contenedor-flex" id="list-categorias"></nav>

        <div class="treatments-section">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 col-lg-12">
                        <div class="row row-margin-none" id="list-productos">
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="patient-review-section">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 col-lg-12">
                        <div class="patient-review">
                            <h2>Patient Review</h2>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing </p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-10 offset-lg-1">
                        <div id="patient-review" class="owl-carousel owl-theme">
                            <div class="item">
                                <div class="patient-review-main-box">
                                    <div class="client-img">
                                        <img class="rounded-circle" src="../../images/client-img.jpg" alt="" />
                                    </div>
                                    <div class="patient-review-slide-box">
                                        <p>&#8220; Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus malesuada risus sapien, ac lobortis erat tincidunt ac. Pellentesque molestie posuere dolor id gravida. Proin consectetur metus et erat tincidunt
                                            nec volutpat. &#8221;</p>
                                    </div>
                                </div>
                            </div>
                            <div class="item">
                                <div class="patient-review-main-box">
                                    <div class="client-img">
                                        <img class="rounded-circle" src="../../images/client-img.jpg" alt="" />
                                    </div>
                                    <div class="patient-review-slide-box">
                                        <p>&#8220; Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus malesuada risus sapien, ac lobortis erat tincidunt ac. Pellentesque molestie posuere dolor id gravida. Proin consectetur metus et erat tincidunt
                                            nec volutpat. &#8221;</p>
                                    </div>
                                </div>
                            </div>
                            <div class="item">
                                <div class="patient-review-main-box">
                                    <div class="client-img">
                                        <img class="rounded-circle" src="../../images/client-img.jpg" alt="" />
                                    </div>
                                    <div class="patient-review-slide-box">
                                        <p>&#8220; Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus malesuada risus sapien, ac lobortis erat tincidunt ac. Pellentesque molestie posuere dolor id gravida. Proin consectetur metus et erat tincidunt
                                            nec volutpat. &#8221;</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>




        <div class="footer-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-sm-6 col-md-6 col-lg-3 col-xl-3">
                        <div class="form-box">
                            <form>
                                <div class="align-items-center">
                                    <div class="col-form-box">
                                        <div class="input-group mb-2">
                                            <div class="input-group-addon"><img src="../../images/user-icon.png" alt="" /></div>
                                            <input type="text" class="form-control" id="name" placeholder="Name">
                                        </div>
                                    </div>
                                    <div class="col-form-box">
                                        <div class="input-group mb-2">
                                            <div class="input-group-addon"><img src="../../images/email-icon.png" alt="" /></div>
                                            <input type="text" class="form-control" id="email" placeholder="Email">
                                        </div>
                                    </div>
                                    <div class="col-form-box">
                                        <div class="input-group mb-2">
                                            <div class="input-group-addon"><img class="message-img" src="../../images/message-icon.png" alt="" /></div>
                                            <textarea class="form-control" id="message" placeholder="Message"></textarea>
                                        </div>
                                    </div>
                                    <div class="col-form-box">
                                        <button type="submit" class="btn btn-block btn-send">Send</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-2 col-xl-3">
                        <div class="single-widget single-widget-margin-top">
                            <div class="widget-title">
                                <h2>Site Links</h2>
                            </div>
                            <div class="footer">
                                <ul>
                                    <li><a href="index.html">Home</a></li>
                                    <li><a href="about-us.html">About Us</a></li>
                                    <li><a href="faq.html">FAQ</a></li>
                                    <li><a href="reviews.html">Reviews</a></li>
                                    <li><a href="blog.html">Blog</a></li>
                                    <li><a href="contact.html">Contact</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-3 col-xl-3">
                        <div class="single-widget">
                            <div class="widget-title">
                                <h2>Quick Links</h2>
                            </div>
                            <div class="footer">
                                <ul>
                                    <li><a href="javascript:;">My Account</a></li>
                                    <li><a href="javascript:;">Pricing</a></li>
                                    <li><a href="javascript:;">Delivery</a></li>
                                    <li><a href="javascript:;">Terms and Conditions</a></li>
                                    <li><a href="javascript:;">Privacy Policy</a></li>
                                    <li><a href="javascript:;">Site map</a></li>

                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-4 col-xl-3">
                        <div class="single-widget">
                            <div class="widget-title">
                                <h2>Contact</h2>
                            </div>
                            <div class="footer">
                                <p><span>Address :</span><br> 17 Lorem Road,<br> Lorem ipusm, USA, W51CT <br><br>
                                </p>
                                <p><span>Phone :</span> 0123 4567890
                                </p>
                                <p><span>Email :</span>
                                    <a href="mailto:info@planexpharmacy.com">info@planexpharmacy.com</a>
                                </p>
                            </div>
                            <div class="social-icons">
                                <ul>
                                    <li><a href="javascript:;"><i class="fa fa-facebook"></i></a></li>
                                    <li><a href="javascript:;"><i class="fa fa-google-plus"></i></a></li>
                                    <li><a href="javascript:;"><i class="fa fa-linkedin"></i></a></li>
                                    <li><a href="javascript:;"><i class="fa fa-twitter"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>Copyright &#169; 2018 <a href="javascript:;">MEDI-WEB</a>. TODOS LOS DERECHOS RESERVADOS.</p>
            </div>
        </div>
        <!-- End Footer Wrapper -->
    </div>


    <!-- Modal -->
    <div class="modal fade" id="modalCarrito" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel" style="text-transform: uppercase;"><i class="fa fa-shopping-cart" aria-hidden="true"></i>&nbsp;Carrito de compra</h5>
                </div>
                <div class="modal-body">
                    <div id="bodyCarrito"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Seguir comprando</button>
                    <button type="button" class="btn btn-primary" id="infoCliente">Finalizar compra</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal -->
    <div class="modal fade" id="modalCliente" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lx">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel" style="text-transform: uppercase;"><i class="fa fa-shopping-cart" aria-hidden="true"></i>&nbsp;Carrito de compra</h5>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label for="nombre">Nombre</label>
                            <input type="text" class="form-control" id="nombre" />
                        </div>

                        <div class="form-group col-md-6">
                            <label for="Apellido">Apellido</label>
                            <input type="text" class="form-control" id="apellido" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <label for="correo">Correo electronico</label>
                            <input type="email" class="form-control" id="correo" />
                        </div>
                        <div class="form-group col-md-6">
                            <label for="fecha">Fecha nacimiento</label>
                            <input type="date" class="form-control" id="fecha" />
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label for="direccion">Dirección</label>
                            <input type="text" class="form-control" id="direccion" />
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Seguir comprando</button>
                    <button type="button" class="btn btn-primary" id="finCompra">Finalizar compra</button>
                </div>
            </div>
        </div>
    </div>


    <script src="../../js/jquery.js"></script>
    <script src="../../js/popper.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>
    <script src="../../js/owl.carousel.min.js"></script>
    <script src="../../js/ie10-viewport-bug-workaround.js"></script>
    <script src="../../js/custom.js"></script>
    <script>
        var arrayCarrito = [];
        var conCarrito = 0;
        var code1 = "";
        $(document).ready(function() {

            $.ajax({
                type: 'GET',
                url: '../../controllers/productoController.php',
                data: 'action=findAll',
                success: function(data) {

                    let result = JSON.parse(data);
                    let code = "";
                    for (let i = 0; i < result.length; i++) {
                        code += `
                        <div class="col-sm-2 col-lg-3 categoria">
                            <a id="click" href="javascript:click(${result[i].id_categoria})">
                                <div class="other-treatments">
                                    <img src="../../images/list-thumb.png" alt="" />
                                    <h2>${result[i].descripcion}</h2>
                                    <i class="fa fa-angle-right"></i>
                                </div>
                            </a>
                        </div>
                        `;
                    }
                    $("#list-categorias").html(code);
                },
                error: function() {
                    alert("Error");
                }
            });
        });

        function click(id) {
            $.ajax({
                type: 'POST',
                url: '../../controllers/productoController.php',
                data: 'id=' + id + '&action=findById',
                success: function(data) {
                    debugger;
                    let result = JSON.parse(data);
                    let code = "";
                    for (let i = 0; i < result.length; i++) {
                        code += `
                        <div class="col-sm-6 col-md-6 col-lg-4">
                                <div class="treatments margen">
                                    <h2>${result[i].nombre_comercial}</h2>
                                    <img class="img-thumbnail img-product" src="../../${result[i].imagen}" alt="" />
                                    <p class="parrafo">${result[i].descripcion}</p>
                                    <h4>Valor: ${new Intl.NumberFormat('es-CO').format(result[i].precio)} COP</h4>
                                    <h5 class="cantidad">Cantidad:<input type="number" min="0" value="0" id="cantidad${i}"></h5>
                                    <button class="button" id="btnAddCarrito${i}" onclick="addCarrito(${result[i].id_medicamento}, '${result[i].nombre_comercial}', ${result[i].precio}, '${result[i].imagen}', ${i})">Añadir al carrito</button>
                                    </div>
                            </div>
                        `;
                    }
                    $("#list-productos").html(code);
                },
                error: function() {
                    alert("Error");
                }
            });
        }

        function addCarrito(id, nombre, precio, imagen, numCantidad) {
            debugger;
            $.ajax({
                type: 'POST',
                url: '../../controllers/productoController.php',
                data: 'id=' + id + '&action=findByIdStockxMedi',
                success: function(data) {
                    debugger;
                    let result = JSON.parse(data);
                    let stock = parseInt(result[0].stock);
                    let cantidad = parseInt($(`#cantidad${numCantidad}`).val());
                    if (cantidad == 0) return alert("Por favor ingresar una cantidad para este producto");
                    if (stock < cantidad) return alert("Stock insuficiente");
                    else {
                        if (data) {
                            let obj = {
                                "id": id,
                                "nombre": nombre,
                                "precio": precio,
                                "imagen": imagen,
                                "cantidad": cantidad
                            }
                            arrayCarrito.push(obj);
                            $("#numCarrito").text(++conCarrito);
                            $(`#cantidad${numCantidad}`).val(0);
                            //$(`#cantidad${numCantidad}`).prop('disabled', true);
                            //$(`#btnAddCarrito${numCantidad}`).prop('disabled', true);
                        }
                    }
                },
                error: function() {
                    alert("Error");
                }
            });
        }

        $("#carrito").click(function() {
            debugger;
            if ($("#numCarrito").text() == "") return alert("El carrito de compras esta vacio");
            let code = "";
            let total = 0;
            for (let i = 0; i < arrayCarrito.length; i++) {
                code += `
                    <div class="row">
                        <div class="col-md-2"><img style="width: 80px; height: 80px;" src="../../${arrayCarrito[i].imagen}" alt="" /></div>
                        <div class="col-md-3 mt-4 modalCarrito text-left">${arrayCarrito[i].nombre}</div>
                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio)}</div>
                        <div class="col-md-2 mt-4 modalCarrito text-center"><a href="javascript:restarCarrito(${arrayCarrito[i].id})"><i class="fas fa-minus"></i></a>&nbsp;&nbsp;${parseInt(arrayCarrito[i].cantidad)}&nbsp;&nbsp;<a href="javascript:sumarCarrito(${arrayCarrito[i].id})"><i class="fas fa-plus"></i></a></div>
                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio * parseInt(arrayCarrito[i].cantidad))}</div>
                        <div class="col-md-1 mt-4 modalCarrito"><a href="javascript:eliminarCarrito(${arrayCarrito[i].id})"><i class="fas fa-trash"></i></a></div>
                    </div>
                    <hr>
                `;
            }

            $("#bodyCarrito").html(code);
            $("#modalCarrito").modal("show");

        });

        function restarCarrito(id) {
            let code = '';
            for (let i = 0; i < arrayCarrito.length; i++) {
                if (arrayCarrito[i].id == id) {
                    if (arrayCarrito[i].cantidad == 1) {
                        return alert("Por favor eliminar el registro");
                    } else {
                        code += `
                         <div class="row">
                            <div class="col-md-2"><img style="width: 80px; height: 80px;" src="../../${arrayCarrito[i].imagen}" alt="" /></div>
                            <div class="col-md-3 mt-4 modalCarrito text-left">${arrayCarrito[i].nombre}</div>
                            <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio)}</div>
                            <div class="col-md-2 mt-4 modalCarrito text-center"><a href="javascript:restarCarrito(${arrayCarrito[i].id})"><i class="fas fa-minus"></i></a>&nbsp;&nbsp;${parseInt(--arrayCarrito[i].cantidad)}&nbsp;&nbsp;<a href="javascript:sumarCarrito(${arrayCarrito[i].id})"><i class="fas fa-plus"></i></a></div>
                            <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio * parseInt(arrayCarrito[i].cantidad))}</div>
                            <div class="col-md-1 mt-4 modalCarrito"><a href="javascript:eliminarCarrito(${arrayCarrito[i].id})"><i class="fas fa-trash"></i></a></div>
                        </div>
                        <hr>`;

                    }
                } else {
                    code += `
                        <div class="row">
                        <div class="col-md-2"><img style="width: 80px; height: 80px;" src="../../${arrayCarrito[i].imagen}" alt="" /></div>
                        <div class="col-md-3 mt-4 modalCarrito text-left">${arrayCarrito[i].nombre}</div>
                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio)}</div>
                        <div class="col-md-2 mt-4 modalCarrito text-center"><a href="javascript:restarCarrito(${arrayCarrito[i].id})"><i class="fas fa-minus"></i></a>&nbsp;&nbsp;${parseInt(arrayCarrito[i].cantidad)}&nbsp;&nbsp;<a href="javascript:sumarCarrito(${arrayCarrito[i].id})"><i class="fas fa-plus"></i></a></div>
                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio * parseInt(arrayCarrito[i].cantidad))}</div>
                        <div class="col-md-1 mt-4 modalCarrito"><a href="javascript:eliminarCarrito(${arrayCarrito[i].id})"><i class="fas fa-trash"></i></a></div>
                    </div>
                    <hr>`;
                }
            }
            $("#bodyCarrito").html(code);
        }

        function sumarCarrito(id) {
            $.ajax({
                type: 'POST',
                url: '../../controllers/productoController.php',
                data: 'id=' + id + '&action=findByIdStockxMedi',
                success: function(data) {
                    let result = JSON.parse(data);
                    let stock = parseInt(result[0].stock);
                    let code = '';
                    let cant = 0;
                    for (let i = 0; i < arrayCarrito.length; i++) {
                        debugger;
                        if (arrayCarrito[i].id == id) {
                            cant = arrayCarrito[i].cantidad;
                            if (cant + 1 > stock) return alert("Stock insuficiente");
                            else {
                                ++arrayCarrito[i].cantidad;
                                debugger;
                                for (let j = 0; j < arrayCarrito.length; j++) {
                                    code += `
                                        <div class="row">
                                        <div class="col-md-2"><img style="width: 80px; height: 80px;" src="../../${arrayCarrito[j].imagen}" alt="" /></div>
                                        <div class="col-md-3 mt-4 modalCarrito text-left">${arrayCarrito[j].nombre}</div>
                                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[j].precio)}</div>
                                        <div class="col-md-2 mt-4 modalCarrito text-center"><a href="javascript:restarCarrito(${arrayCarrito[j].id})"><i class="fas fa-minus"></i></a>&nbsp;&nbsp;${parseInt(arrayCarrito[j].cantidad)}&nbsp;&nbsp;<a href="javascript:sumarCarrito(${arrayCarrito[j].id})"><i class="fas fa-plus"></i></a></div>
                                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[j].precio * parseInt(arrayCarrito[j].cantidad))}</div>
                                        <div class="col-md-1 mt-4 modalCarrito"><a href="javascript:eliminarCarrito(${arrayCarrito[j].id})"><i class="fas fa-trash"></i></a></div>
                                    </div>
                                    <hr>`;
                                }
                            }
                        }
                    }
                    $("#bodyCarrito").html(code);
                },
                error: function() {
                    alert("Error");
                }
            });
        }

        function eliminarCarrito(id) {
            debugger;
            let pos = 0;
            for (let i = 0; arrayCarrito.length; i++) {
                if (arrayCarrito[i].id == id) {
                    pos = i;
                    break;
                }
            }
            arrayCarrito.splice(pos, 1);
            let code = '';
            for (let i = 0; i < arrayCarrito.length; i++) {
                code += `
                    <div class="row">
                        <div class="col-md-2"><img style="width: 80px; height: 80px;" src="../../${arrayCarrito[i].imagen}" alt="" /></div>
                        <div class="col-md-3 mt-4 modalCarrito text-left">${arrayCarrito[i].nombre}</div>
                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio)}</div>
                        <div class="col-md-2 mt-4 modalCarrito text-center"><a href="javascript:restarCarrito(${arrayCarrito[i].id})"><i class="fas fa-minus"></i></a>&nbsp;&nbsp;${parseInt(arrayCarrito[i].cantidad)}&nbsp;&nbsp;<a href="javascript:sumarCarrito(${arrayCarrito[i].id})"><i class="fas fa-plus"></i></a></div>
                        <div class="col-md-2 mt-4 modalCarrito text-right">$${new Intl.NumberFormat('es-CO').format(arrayCarrito[i].precio * parseInt(arrayCarrito[i].cantidad))}</div>
                        <div class="col-md-1 mt-4 modalCarrito"><a href="javascript:eliminarCarrito(${arrayCarrito[i].id})"><i class="fas fa-trash"></i></a></div>
                    </div>
                    <hr>
                `;
            }
            $("#numCarrito").text(--conCarrito);
            $("#bodyCarrito").html(code);
        }

        $("#finCompra").click(function() {

            let nombre = $("#nombre").val();
            let apellido = $("#apellido").val();
            let correo = $("#correo").val();
            let fecha = $("#fecha").val();
            let direccion = $("#direccion").val();

            if(nombre == "") return alert("Por favor ingresar un nombre!!");
            if(apellido == "") return alert("Por favor ingresar un apellido!!");
            if(correo == "") return alert("Por favor ingresar un correo!!");
            if(fecha == "") return alert("Por favor ingresar un fecha!!");
            if(direccion == "") return alert("Por favor ingresar un direccion!!");

            let codigo = create_UUID();
            let total = 0;
            for (let i = 0; i < arrayCarrito.length; i++) {
                debugger;
                total += arrayCarrito[i].cantidad * arrayCarrito[i].precio;
                let obj = {
                    "action": "insert",
                    "id": arrayCarrito[i].id,
                    "cantidad": arrayCarrito[i].cantidad,
                    "codigo": codigo
                }

                $.ajax({
                    type: 'POST',
                    url: '../../controllers/productoController.php',
                    data: obj,
                    success: function(data) {
                        debugger;
                    },
                    error: function() {
                        alert("Error");
                    }
                });
            }
            let obj1 = {
                "nombre" : nombre,
                "apellido" : apellido,
                "correo" : correo,
                "fecha" : fecha,
                "direccion" : direccion,
                "action": "insertCliente",
                "codigo": codigo
            }
            $.ajax({
                type: 'POST',
                url: '../../controllers/productoController.php',
                data: obj1,
                success: function(data) {
                    
                },
                error: function() {
                    alert("Error");
                }
            });
            let obj = {
                "valorPedido": total,
                "codigo": codigo,
                "action": "insertPedido"
            }
            $.ajax({
                type: 'POST',
                url: '../../controllers/productoController.php',
                data: obj,
                success: function(data) {
                    arrayCarrito.splice(0, arrayCarrito.length);
                    $("#numCarrito").text("");
                    $("#modalCarrito").modal("hide");
                    alert(data);
                },
                error: function() {
                    alert("Error");
                }
            });

        });

        $("#infoCliente").click(() => {
            $("#infoCliente").css("display", "none");
            $("#finCompra").css("display", "block");
            
            $("#modalCarrito").modal("hide");
            $('#modalCliente').modal("show");
        });


        function create_UUID() {
            var dt = new Date().getTime();
            var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                var r = (dt + Math.random() * 16) % 16 | 0;
                dt = Math.floor(dt / 16);
                return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);
            });
            return uuid;
        }
    </script>

</body>

</html>